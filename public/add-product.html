<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add Product - My Store</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <nav>
      <div class="logo">üõçÔ∏è My Store</div>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/products.html">Products</a></li>
        <li><a href="/add-product.html">Add Product</a></li>
        <li><a href="/orders.html">Orders</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <h1>Add New Product</h1>
    
    <div id="success" class="success" style="display: none;"></div>
    <div id="error" class="error" style="display: none;"></div>
    
    <div class="form-container">
      <form id="productForm">
        <div class="form-group">
          <label for="name">Product Name:</label>
          <input type="text" id="name" name="name" required>
        </div>
        
        <div class="form-group">
          <label for="description">Description:</label>
          <textarea id="description" name="description" rows="4" required></textarea>
        </div>
        
        <div class="form-group">
          <label for="price">Price ($):</label>
          <input type="number" id="price" name="price" step="0.01" min="0" required>
        </div>
        
        <div class="form-group">
          <label for="category">Category:</label>
          <select id="category" name="category" required>
            <option value="">Select a category</option>
            <option value="Electronics">Electronics</option>
            <option value="Clothing">Clothing</option>
            <option value="Books">Books</option>
            <option value="Home">Home</option>
            <option value="Sports">Sports</option>
            <option value="Other">Other</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="stock">Stock Quantity:</label>
          <input type="number" id="stock" name="stock" min="0" required>
        </div>
        
        <div class="form-group">
          <label for="image">Image URL:</label>
          <input type="url" id="image" name="image" placeholder="https://example.com/image.jpg">
        </div>
        
        <button type="submit" class="btn">Add Product</button>
      </form>
    </div>
  </main>

  <script src="script.js"></script>
  <script>
    document.getElementById('productForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      // Get form data
      const formData = new FormData(this);
      const productData = {
        name: formData.get('name'),
        description: formData.get('description'),
        price: parseFloat(formData.get('price')),
        category: formData.get('category'),
        stock: parseInt(formData.get('stock')),
        image: formData.get('image') || undefined
      };
      
      try {
        const response = await fetch('/api/products', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(productData)
        });
        
        if (response.ok) {
          const newProduct = await response.json();
          showSuccess('Product added successfully!');
          document.getElementById('productForm').reset();
        } else {
          const error = await response.json();
          showError(error.error || 'Failed to add product');
        }
      } catch (error) {
        showError('Error adding product. Please try again.');
      }
    });

    function showSuccess(message) {
      const successDiv = document.getElementById('success');
      successDiv.textContent = message;
      successDiv.style.display = 'block';
      setTimeout(() => {
        successDiv.style.display = 'none';
      }, 5000);
    }

    function showError(message) {
      const errorDiv = document.getElementById('error');
      errorDiv.textContent = message;
      errorDiv.style.display = 'block';
      setTimeout(() => {
        errorDiv.style.display = 'none';
      }, 5000);
    }
  </script>
</body>
</html>